{% load static %}
<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Nueva Contraseña</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #212529; }
        .form-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .card { background-color: #343a40; color: #f8f9fa; border: none; }
        .form-control { background-color: #495057; color: #f8f9fa; border-color: #6c757d; }
        .form-control:focus { background-color: #495057; color: #f8f9fa; border-color: #adb5bd; box-shadow: none; }
        .form-text { color: #adb5bd !important; }
        ul { color: #adb5bd; padding-left: 20px; }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="col-md-4">
            <div class="card shadow-lg">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <img src="{% static 'images/logo.png' %}" alt="Logo de la Empresa" style="max-width: 150px; height: auto;">
                    </div>
                    {% if validlink %}
                        <h3 class="card-title text-center mb-4">Establecer Nueva Contraseña</h3>
                        <form method="post">
                            {% csrf_token %}
                            
                            {% for field in form %}
                                <div class="mb-3">
                                    <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                                    <input type="{{ field.field.widget.input_type }}" name="{{ field.name }}" id="{{ field.id_for_label }}" class="form-control">
                                    {% if field.help_text %}
                                        <div class="form-text">{{ field.help_text|safe }}</div>
                                    {% endif %}
                                    {% for error in field.errors %}
                                        <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                </div>
                            {% endfor %}

                            <div class="d-grid">
                                <button type="submit" class="btn btn-dark btn-block">Cambiar mi contraseña</button>
                            </div>
                        </form>
                    {% else %}
                        <p class="alert alert-danger">El enlace para restablecer la contraseña no es válido, posiblemente porque ya ha sido utilizado. Por favor, solicita un nuevo restablecimiento de contraseña.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <footer class="footer mt-auto py-3 text-center text-white-50 fixed-bottom">
        <div class="container">
          <hr class="border-secondary">
          <small>
            <a href="https://example.com">Gestión de Inventario</a> © 2025 by <a href="https://example.com">José Meléndez, Wilfredo Sánchez, Diego Iribarren</a> is licensed under <a href="https://creativecommons.org/licenses/by-nd/4.0/">CC BY-ND 4.0</a><img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="" style="max-width: 1em;max-height:1em;margin-left: .2em;"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="" style="max-width: 1em;max-height:1em;margin-left: .2em;"><img src="https://mirrors.creativecommons.org/presskit/icons/nd.svg" alt="" style="max-width: 1em;max-height:1em;margin-left: .2em;">
          </small>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>